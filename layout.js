import{db}from"./db.js";export function createAppHeader(){const e=db.facility||{},n=db.currentUser;return`\n    <div class="thynktech-header" style="background: linear-gradient(135deg, #ffd700 0%, #ffaa00 25%, #2196f3 50%, #eaf6fb 100%); background-size: 400% 400%; animation: gradientShift 8s ease infinite; border-bottom: 1px solid rgba(255,255,255,0.2); box-shadow: 0 2px 10px rgba(0,0,0,0.1);">\n      <style>\n        @keyframes gradientShift {\n          0% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n          100% { background-position: 0% 50%; }\n        }\n        .thynktech-header .facility-card {\n          background: rgba(255,255,255,0.95);\n          border-radius: 15px;\n          padding: 0.8rem 1.2rem;\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255,255,255,0.3);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n        }\n        .thynktech-header .user-profile-badge {\n          background: rgba(255,255,255,0.95);\n          border-radius: 25px;\n          padding: 0.5rem 1rem;\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255,255,255,0.3);\n          box-shadow: 0 4px 15px rgba(0,0,0,0.1);\n          transition: all 0.3s ease;\n        }\n        .thynktech-header .user-profile-badge:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 6px 20px rgba(0,0,0,0.15);\n        }\n        .thynktech-header .logout-btn {\n          background: linear-gradient(45deg, #ff4444, #cc0000);\n          border: none;\n          border-radius: 20px;\n          padding: 0.5rem 1rem;\n          color: white;\n          font-weight: 600;\n          transition: all 0.3s ease;\n          box-shadow: 0 4px 15px rgba(255,68,68,0.3);\n        }\n        .thynktech-header .logout-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 6px 20px rgba(255,68,68,0.4);\n          background: linear-gradient(45deg, #cc0000, #ff4444);\n        }\n      </style>\n      <div class="container py-3 d-flex flex-column flex-md-row align-items-center justify-content-between">\n        <div class="facility-card mb-2 mb-md-0">\n          <div class="d-flex align-items-center">\n            <div class="me-3" style="font-size: 2rem;">üá¨üá≠</div>\n            <div>\n              <div class="facility-name fw-bold" style="color: #2196f3; font-size: 1.3rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">${e.name||"ThynkTech Health System"}</div>\n              <div class="facility-location text-muted" style="font-size: 0.9rem; color: #666 !important;">${e.description||e.location||"Professional Healthcare Management"}</div>\n            </div>\n          </div>\n        </div>\n        <div class="d-flex align-items-center gap-3">\n          <div class="user-profile-badge" style="color: #2196f3; font-weight: 600; cursor: pointer;" onclick="showProfileModal()">\n            <i class="bi bi-person-circle" style="font-size: 1.4rem; vertical-align: middle;"></i>\n            <span class="ms-2">${n?.username||"User"}</span>\n          </div>\n          <button class="logout-btn" onclick="handleLogout()" aria-label="Logout">\n            <i class="bi bi-box-arrow-right me-1"></i>\n            <span>Logout</span>\n          </button>\n        </div>\n      </div>\n    </div>`}export function createAppFooter(){const e=(new Date).getFullYear(),n=db.facility||{};return`\n    <footer class="footer mt-auto py-4" style="background: linear-gradient(135deg, #f8f9fa 0%, #e3f2fd 50%, #f5fafd 100%); border-top: 1px solid rgba(33,150,243,0.1); text-align: center;">\n      <div class="container">\n        <div class="row justify-content-center">\n          <div class="col-md-8">\n            <div class="d-flex align-items-center justify-content-center mb-3">\n              <div class="footer-logo-section d-flex align-items-center">\n                <div class="me-3" style="font-size: 1.8rem;">üá¨üá≠</div>\n                <div>\n                  <div class="fw-bold" style="color: #2196f3; font-size: 1.1rem;">${n.name||"ThynkTech Health System"}</div>\n                  <div class="text-muted small">${n.description||"Professional Healthcare Management"}</div>\n                </div>\n              </div>\n            </div>\n            \n            <div class="footer-contact mb-3">\n              <div class="d-flex justify-content-center align-items-center flex-wrap gap-4">\n                <div class="contact-item">\n                  <i class="bi bi-telephone-fill" style="color: #2196f3;"></i>\n                  <a href="tel:+233269609634" style="color: #2196f3; text-decoration: none; font-weight: 500;">+233 26 960 9634</a>\n                </div>\n                <div class="contact-item">\n                  <i class="bi bi-globe" style="color: #ffd700;"></i>\n                  <a href="https://geesway12.github.io/thynktech-site/" target="_blank" style="color: #2196f3; text-decoration: none; font-weight: 500;">thynktech-site</a>\n                </div>\n                <div class="contact-item">\n                  <i class="bi bi-envelope-fill" style="color: #2196f3;"></i>\n                  <span style="color: #666;">support@thynktech.com</span>\n                </div>\n              </div>\n            </div>\n            \n            <div class="footer-bottom">\n              <div class="text-muted small">\n                <div class="d-flex justify-content-center align-items-center flex-wrap gap-3">\n                  <span>¬© ${e} ThynkTech Health Solutions</span>\n                  <span class="footer-separator">‚Ä¢</span>\n                  <span>Built with ‚ù§Ô∏è in Ghana</span>\n                  <span class="footer-separator">‚Ä¢</span>\n                  <span>Powered by Innovation</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <style>\n        .footer .contact-item {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          font-size: 0.9rem;\n        }\n        .footer .footer-separator {\n          color: #ccc;\n          font-weight: bold;\n        }\n        .footer .contact-item a:hover {\n          text-decoration: underline !important;\n        }\n        @media (max-width: 768px) {\n          .footer .d-flex.gap-4 {\n            flex-direction: column;\n            gap: 1rem !important;\n          }\n          .footer .d-flex.gap-3 {\n            flex-direction: column;\n            gap: 0.5rem !important;\n          }\n          .footer .footer-separator {\n            display: none;\n          }\n        }\n      </style>\n    </footer>\n  `}export function getThemeAwareLogo(){return"logo.png"}export function initializeTheme(){document.body.style.background="linear-gradient(135deg, #f8f9fa 0%, #eaf6fb 50%, #f5fafd 100%)",document.body.style.color="#222",document.body.style.fontFamily='Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',document.body.style.minHeight="100vh",document.body.style.margin="0",document.body.style.padding="0"}export function wrapWithLayout(e,n="",t=!0,o=!0){return`\n    <div class="app-wrapper" style="min-height: 100vh; display: flex; flex-direction: column;">\n      ${t?createAppHeader():""}\n      <main class="main-content flex-grow-1" data-page="${n}" style="padding: 2rem 0; background: inherit;">\n        <div class="container">\n          ${e}\n        </div>\n      </main>\n      ${o?createAppFooter():""}\n    </div>\n  `}export function setupLogoutButton(){document.querySelectorAll('[data-action="logout"], .logout-btn, #logoutBtn').forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),handleLogout()})})}function handleLogout(){void 0!==db&&(db.currentUser=null,"function"==typeof saveDb&&saveDb()),localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),window.location.hash="#login",setTimeout(()=>{window.location.reload()},100)}export function showUserProfile(){const e=db.currentUser;if(!e)return;const n=showModal(`\n    <div style="max-width: 500px; margin: 0 auto;">\n      <div style="background: linear-gradient(135deg, #f5fafd, #e3f2fd); border-radius: 20px; padding: 2rem; box-shadow: 0 10px 30px rgba(33,150,243,0.1);">\n        <div style="text-align: center; margin-bottom: 2rem;">\n          <div style="font-size: 4rem; margin-bottom: 1rem;">üë§</div>\n          <h5 style="color: #2196f3; margin-bottom: 0.5rem;"><i class="bi bi-person-circle"></i> User Profile</h5>\n          <p style="color: #666; margin: 0;">Update your personal information</p>\n        </div>\n        \n        <form id="userProfileForm">\n          <div class="mb-3">\n            <label class="form-label" style="color: #2196f3; font-weight: 600;">Username</label>\n            <input type="text" class="form-control" name="username" value="${e.username||""}" \n                   style="border: 2px solid #e3f2fd; border-radius: 10px; padding: 0.75rem;" required>\n          </div>\n          <div class="mb-3">\n            <label class="form-label" style="color: #2196f3; font-weight: 600;">Full Name</label>\n            <input type="text" class="form-control" name="fullName" value="${e.fullName||""}" \n                   style="border: 2px solid #e3f2fd; border-radius: 10px; padding: 0.75rem;" placeholder="Enter your full name">\n          </div>\n          <div class="mb-3">\n            <label class="form-label" style="color: #2196f3; font-weight: 600;">Email</label>\n            <input type="email" class="form-control" name="email" value="${e.email||""}" \n                   style="border: 2px solid #e3f2fd; border-radius: 10px; padding: 0.75rem;" placeholder="Enter your email">\n          </div>\n          <div class="mb-3">\n            <label class="form-label" style="color: #2196f3; font-weight: 600;">Contact Number</label>\n            <input type="tel" class="form-control" name="contact" value="${e.contact||""}" \n                   style="border: 2px solid #e3f2fd; border-radius: 10px; padding: 0.75rem;" placeholder="Enter contact number">\n          </div>\n          <div class="mb-3">\n            <label class="form-label" style="color: #2196f3; font-weight: 600;">Change Password</label>\n            <input type="password" class="form-control" name="newPassword" \n                   style="border: 2px solid #e3f2fd; border-radius: 10px; padding: 0.75rem;" placeholder="Leave blank to keep current password">\n          </div>\n          <div class="d-flex justify-content-between gap-2">\n            <button type="submit" class="btn" style="flex: 1; background: linear-gradient(90deg, #6ec6ff, #2196f3); color: white; border: none; border-radius: 10px; padding: 0.75rem; font-weight: 600;">Update Profile</button>\n            <button type="button" class="btn" id="cancelProfile" style="flex: 1; background: #e3f2fd; color: #2196f3; border: none; border-radius: 10px; padding: 0.75rem; font-weight: 600;">Cancel</button>\n          </div>\n          <div id="profileMsg" class="mt-3 text-center small"></div>\n        </form>\n      </div>\n    </div>`);document.getElementById("cancelProfile").onclick=n,document.getElementById("userProfileForm").onsubmit=function(t){t.preventDefault();const o=new FormData(this);e.username=o.get("username"),e.fullName=o.get("fullName"),e.email=o.get("email"),e.contact=o.get("contact"),o.get("newPassword")&&(e.password=o.get("newPassword"));const a=db.users.findIndex(n=>n.id===e.id);-1!==a&&(db.users[a]={...db.users[a],...e}),"function"==typeof saveDb&&saveDb(),this.querySelector("#profileMsg").textContent="Profile updated successfully!",this.querySelector("#profileMsg").className="text-success mt-3 text-center small";document.querySelectorAll(".user-profile-badge span").forEach(n=>{n.textContent=e.username}),setTimeout(()=>n(),1500)}}export function showModal(e){const n="dynamicModal"+Date.now(),t=`\n    <div class="modal-overlay" id="${n}" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 9999; backdrop-filter: blur(5px);" onclick="closeModal('${n}')">\n      <div class="modal-content" style="background: white; border-radius: 20px; max-width: 90%; max-height: 90%; overflow-y: auto; padding: 0; box-shadow: 0 20px 60px rgba(0,0,0,0.3); animation: modalSlideIn 0.3s ease;" onclick="event.stopPropagation();">\n        <div style="position: relative; padding: 2rem;">\n          <button onclick="closeModal('${n}')" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; color: #999; cursor: pointer; padding: 0.5rem; border-radius: 50%; transition: all 0.2s ease;" onmouseover="this.style.background='#f0f0f0'" onmouseout="this.style.background='none'">\n            <i class="bi bi-x-lg"></i>\n          </button>\n          ${e}\n        </div>\n      </div>\n    </div>\n    <style>\n      @keyframes modalSlideIn {\n        from { transform: scale(0.9) translateY(-20px); opacity: 0; }\n        to { transform: scale(1) translateY(0); opacity: 1; }\n      }\n    </style>\n  `;return document.body.insertAdjacentHTML("beforeend",t),()=>closeModal(n)}export function closeModal(e){const n=document.getElementById(e);n&&(n.style.animation="modalSlideOut 0.3s ease forwards",setTimeout(()=>n.remove(),300))}export function initializeLayout(){initializeTheme(),setupLogoutButton(),window.addEventListener("hashchange",()=>{setTimeout(setupLogoutButton,100)})}"undefined"!=typeof window&&(window.showUserProfile=showUserProfile,window.showProfileModal=showUserProfile,window.handleLogout=handleLogout,window.showModal=showModal,window.closeModal=closeModal,document.addEventListener("DOMContentLoaded",initializeLayout));