import{db,saveDb}from"./db.js";export function renderProfile(e){const s=db.currentUser;s?(e.innerHTML=`\n    <div class="container my-4">\n      <div class="card shadow mx-auto" style="max-width:400px;">\n        <div class="card-body">\n          <h4 class="mb-3"><i class="bi bi-person-circle"></i> Update Profile</h4>\n          <form id="profileForm" autocomplete="off">\n            <div class="mb-3">\n              <label class="form-label">Username</label>\n              <input class="form-control" value="${s.username}" readonly>\n            </div>\n            <div class="mb-3">\n              <label class="form-label">Full Name</label>\n              <input class="form-control" id="fullName" value="${s.fullName||""}" placeholder="Full Name" required>\n            </div>\n            <div class="mb-3">\n              <label class="form-label">Contact Number</label>\n              <input class="form-control" id="contact" value="${s.contact||""}" placeholder="Contact Number">\n            </div>\n            <hr>\n            <h6>Change Password</h6>\n            <div class="mb-2">\n              <label class="form-label">Current Password</label>\n              <input type="password" class="form-control" id="currentPassword" autocomplete="current-password">\n            </div>\n            <div class="mb-2">\n              <label class="form-label">New Password</label>\n              <input type="password" class="form-control" id="newPassword" autocomplete="new-password">\n            </div>\n            <div class="d-flex justify-content-between mt-3">\n              <button class="btn btn-primary">Save Changes</button>\n              <a href="#admin-dashboard" class="btn btn-secondary">Cancel</a>\n            </div>\n            <div id="profileMsg" class="mt-2 small"></div>\n          </form>\n        </div>\n      </div>\n    </div>\n  `,document.getElementById("profileForm").onsubmit=function(e){e.preventDefault();const a=this.fullName.value.trim(),r=this.contact.value.trim(),l=this.currentPassword.value,t=this.newPassword.value;let n="";if(s.fullName=a,s.contact=r,l||t){if(!l||!t)return n="Both current and new password are required to change password.",this.querySelector("#profileMsg").textContent=n,void(this.querySelector("#profileMsg").className="text-danger mt-2 small");if(s.password!==l)return n="Current password is incorrect.",this.querySelector("#profileMsg").textContent=n,void(this.querySelector("#profileMsg").className="text-danger mt-2 small");s.password=t,s.lastPasswordChange=Date.now(),n="Password updated! "}saveDb(),this.querySelector("#profileMsg").textContent=n+"Profile updated!",this.querySelector("#profileMsg").className="text-success mt-2 small",setTimeout(()=>{window.location.hash="#admin-dashboard"},1200)}):e.innerHTML='<div class="alert alert-danger">No user logged in.</div>'}export function isPasswordExpired(e){if(!e)return!1;const s=e.lastPasswordChange||0;return(Date.now()-s)/864e5>30}