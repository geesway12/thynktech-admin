window.setTheme=function(e){document.body.className=`theme-${e}`,localStorage.setItem("thynktech_theme",e)},document.body.className=`theme-${localStorage.getItem("thynktech_theme")||"blue"}`;import{db,saveDb,loadDb}from"./db.js";import{registerServiceWorker}from"./pwa.js";import{renderLogin}from"./auth.js";import{renderFacilitySetup,renderAdminDashboard,renderUserManagement}from"./admin.js";import{renderProfile}from"./profile.js";import{renderPatientList}from"./patients.js";import{renderVisitLog}from"./visits.js";import{renderRegisterMgmt}from"./registers.js";import{renderReports}from"./reports.js";import{renderServiceVisitSelector,renderServiceEntry}from"./services.js";import{renderAppointmentForm}from"./appointments.js";export const themePicker='\n  <div class="float-end mb-2">\n    <span class="me-2"><i class="bi bi-palette"></i> Theme:</span>\n    <button class="btn btn-sm btn-primary" onclick="setTheme(\'blue\')" title="Blue"></button>\n    <button class="btn btn-sm btn-success" onclick="setTheme(\'green\')" title="Green"></button>\n    <button class="btn btn-sm btn-accent" onclick="setTheme(\'orange\')" title="Orange"></button>\n    <button class="btn btn-sm btn-purple" style="background: #6f42c1; color:#fff;" onclick="setTheme(\'purple\')" title="Purple"></button>\n  </div>\n';function router(){const e=document.getElementById("app");if(!db.facility)return window.location.hash="#facility-setup",void renderFacilitySetup(e);if(!db.users||0===db.users.length)return void(window.location.hash="#admin-setup");if(!db.currentUser)return window.location.hash="#login",void renderLogin(e);const t=window.location.hash;if("#facility-setup"===t)renderFacilitySetup(e);else if("#login"===t)renderLogin(e);else if("#admin-dashboard"===t||""===t)renderAdminDashboard(e);else if("#profile"===t)renderProfile(e);else if("#user-mgmt"===t)renderUserManagement(e);else if("#patient-reg"===t)renderPatientList(e);else if("#visit-log"===t)renderVisitLog(e);else if("#register-mgmt"===t)renderRegisterMgmt(e);else if("#reports"===t)renderReports(e);else if(t.startsWith("#appointment")){const r=t.split("-")[1],n=db.patients?.find(e=>e.patientID===r);n?renderAppointmentForm(n):renderAdminDashboard(e)}else t.startsWith("#service-entry")?renderServiceVisitSelector(e):renderAdminDashboard(e)}window.addEventListener("hashchange",router),window.addEventListener("load",()=>{loadDb(),registerServiceWorker(),router()});